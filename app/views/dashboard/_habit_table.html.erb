<div id="activateds" data-controller="activateds">

  <table class="table table-striped table-bordered table-hover">
    <thead class="thead-dark">
      <tr class="sticky-top">
        <th width="">Activated Habits:</th>

        <% if user_signed_in? %>

          <th>Frequency</th>
          <th>Time demand</th>
          <th>Done for today?</th>

        <% end %>

      </tr>
    </thead>

    <tbody>

      <% if user_signed_in? %>

        <% current_user.activateds.each do |activated| %>

          <% habit = @habits.find(activated.habit_id) %>

            <div>

              <tr>

                <td>
                  <%= link_to habit.name, habit %>
                </td>

                <td>
                  <%= habit.frequency %>
                  </td>

              <td>
                <%= habit.time_demand %>
                </td>

              <td>

                <div id="activateds" data-controller="activateds">

                  <%= form_with(model: activated) do |form| %>
                  <%= form.check_box :completed, data: { id: activated.id, action: "activateds#toggle" } %>

                <% end %>

              </div>

            </td>

        </tr>

      </div>

    <% end %>

  <% else %>

    <div>

      <tr>

        <td>
          Sign in to see your activated habits.
        </td>

      </tr>

    </div>

  <% end %>

</tbody>
</table>

</div>